# 在线协同文档编辑器 Q&A

## 项目概述

### Q1: 这个项目是什么？
这是一个基于Tiptap、Y.js和WebSocket的在线协同文档编辑器，允许多用户同时编辑同一文档，实时同步内容和光标位置，并自动解决冲突。

### Q2: 使用了哪些主要技术？
- 前端：Vue 3、Pinia、TypeScript、Vite、Vue Router、Ant Design Vue、TailwindCSS、Less、Tiptap编辑器、Y.js CRDT算法
- 后端：Express、TypeScript、MongoDB、WebSocket (y-websocket)

### Q3: 项目主要功能有哪些？
- 实时协同编辑文档
- 多用户光标同步显示
- 文档列表管理
- 自动冲突解决
- 支持离线编辑
  
## 技术细节

### Q4: 为什么选择Y.js作为协同编辑的解决方案？
Y.js是一个专为协同软件设计的CRDT（Conflict-free Replicated Data Type）实现，它可以自动处理多用户并发编辑时的冲突问题，无需复杂的手动合并操作。Y.js还支持离线编辑，当用户重新连接后可以无缝同步变更。

### Q5: Tiptap编辑器的优势是什么？
Tiptap是基于ProseMirror的编辑器框架，提供了丰富的扩展功能和良好的开发体验。它可以轻松集成Y.js，支持协同编辑，同时提供了丰富的文本格式化工具和可定制的界面。

### Q6: 项目的架构是怎样的？
项目采用前后端分离架构：
- 前端使用Vue 3构建用户界面，Tiptap提供编辑器功能，Y.js处理协同编辑逻辑
- 后端使用Express提供API服务，MongoDB存储文档数据，y-websocket实现实时数据同步

## 开发与部署

### Q7: 如何启动开发环境？
```bash
# 启动前端
cd frontend
pnpm dev

# 启动后端
cd backend
pnpm dev
```

### Q8: 如何部署这个项目？
前端可部署在任意静态文件服务器上，后端需要Node.js环境和MongoDB数据库，同时需要确保WebSocket服务的端口是开放的。

### Q9: 项目如何处理网络断连情况？
得益于Y.js的CRDT算法，用户在离线状态下仍然可以继续编辑文档。当网络恢复时，系统会自动同步本地更改到服务器，并从服务器获取其他用户的更改，自动合并所有变更而不会产生冲突。

## 扩展与维护

### Q10: 如何添加新的编辑器功能？
可以通过Tiptap的扩展系统添加新功能。Tiptap提供了丰富的官方扩展，也支持自定义扩展开发。

### Q11: 系统的性能瓶颈可能在哪里？
- 大型文档的加载和同步可能会占用较多资源
- 同时在线的用户数量过多时，WebSocket服务器可能成为瓶颈
- 数据库性能在文档数量大幅增长时需要关注

### Q12: 项目的安全机制有哪些？
目前项目实现了基本的用户认证和权限控制，确保只有授权用户才能访问和编辑特定文档。未来可以考虑添加更细粒度的权限控制和操作审计功能。
